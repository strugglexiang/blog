# 前言
本篇大幅参考[掘金老姚](https://juejin.im/post/5965943ff265da6c30653879)  


# 正则表达式回溯法原理
正则表达式的匹配原理中，`回溯`出现的频率比较高，跟着老姚的教程，本篇也来理解一下回溯法原理。

# 目录
- [没有回溯的匹配](#没有回溯的匹配)
- [有回溯的匹配](#有回溯的匹配)
  - [例1](#例1)
  - [例2](#例2)
  - [例3](#例3)
- [常见的回溯形式](#常见的回溯形式)
  - [贪婪量词](#贪婪量词)
  - [惰性量词](#分支结构)
  - [分支结构](#分支结构)
- [总结](#总结)

# 没有回溯的匹配
假设现在有正则表达式`/ab{1,3}c/`，它的可是化形式如下：
![](http://source.strugglexiang.xyz/regexp_back_1.png)

当要匹配的字符串是`abbbc`时，这时候的匹配是没有回溯的。匹配过程是：

![](http://source.strugglexiang.xyz/regexp_back_2.png)

可以看到，正则表达式从左至右，各个部分(a、b{1,3}、c)依次匹配，没有出现某部分不匹配导致前面某部分重新匹配的情况。


# 有回溯的匹配
从正则的匹配过程来讲，回溯就是某部分不匹配导致前面部分去尝试其他的可能性，直到匹配完成或者匹配失败。

## 例1
同样以正则`/ab{1,3}c/`为例，去匹配字符串`'abbc'`，这个时候就会出现回溯。匹配过程如下：

![](http://source.strugglexiang.xyz/regexp_back_3.png)

图中第5步，红颜色表示匹配不成功。这个时候，正则的第3个b和c不匹配，表示`b{1,3}`这个取3个b的情况已经结束。然后正则尝试其他可能性，回到匹配2个b的情况下，再用c去匹配c，匹配就成功了。上述第6
步就是我们所说的回溯，它回到了和第4步相同的情况。

## 例2
看完例1，可能感受不明显，我们再看一个更明显的示例。

正则：
![](http://source.strugglexiang.xyz/regexp_back_4.png)

目标字符串是`'abbbc'`，匹配过程如下：
![](http://source.strugglexiang.xyz/regexp_back_5.png)

第7步和第10步是回溯。第6步时，第4个b和c不匹配，也就是`b{1,3}取3个的情况匹配失败`，正则就会尝试`b{1,3}`取2个的情况下后续继续匹配。同理，到了第9步，匹配不成功，继续尝试`b{1,3}`取1个的情况，直到将匹配成功或者所有情况下都匹配失败(也代表正则匹配失败)。

## 例3


# 常见的回溯形式
## 贪婪量词
## 惰性量词
## 分支结构
# 总结
